# Configuración simplificada para vsftpd
# Enfoque en funcionalidad básica para FTP anónimo

# Configuración básica
listen=YES
listen_port=21
background=NO

# Permitir acceso anónimo
anonymous_enable=YES
no_anon_password=YES
anon_root=/var/doc_server/publico

# Acceso de sólo lectura para anónimo
anon_upload_enable=NO
anon_mkdir_write_enable=NO
anon_other_write_enable=NO
anon_world_readable_only=YES

# Usuario local (necesario para administración)
local_enable=YES
write_enable=YES
local_umask=022

# Configuración básica
xferlog_enable=YES
xferlog_std_format=YES
xferlog_file=/var/log/vsftpd.log
dual_log_enable=YES
log_ftp_protocol=YES
syslog_enable=YES

# Configuración de seguridad más relajada
chroot_local_user=NO
allow_writeable_chroot=YES
secure_chroot_dir=/var/run/vsftpd/empty

# Habilitar conexiones pasivas
pasv_enable=YES
pasv_min_port=30000
pasv_max_port=30020
pasv_address=172.40.0.10

# Deshabilitar seccomp para compatibilidad
seccomp_sandbox=NO

# Mensaje de bienvenida
ftpd_banner=Bienvenido al servidor FTP de documentacion (solo lectura)

# Configuración PAM
pam_service_name=vsftpd